# ============================================
# Jira Configuration
# ============================================
JIRA_BASE_URL=https://your-domain.atlassian.net
JIRA_EMAIL=your-email@example.com
JIRA_API_TOKEN=your-jira-api-token
JIRA_PROJECT_KEY=PROJ

# Option A: Assign tasks to a dedicated "Claude" Jira user
# Find this with: npm run find-account-ids
JIRA_CLAUDE_ACCOUNT_ID=

# Option B: If no Claude user, use a label to identify Claude tasks
# Tasks with this label in "To Do" will be picked up
JIRA_CLAUDE_LABEL=claude-bot

# Fallback Jira account ID for review assignments (used when issue has no reporter)
YOUR_JIRA_ACCOUNT_ID=

# ============================================
# GitHub Configuration
# ============================================
GITHUB_TOKEN=ghp_your-fine-grained-token
GITHUB_OWNER=your-github-username-or-org
GITHUB_REPO=your-repo-name

# GitHub Actions workflow file to monitor after staging push (optional)
# If set, the orchestrator will poll the workflow run and auto-fix build failures
GITHUB_ACTIONS_WORKFLOW_FILE=staging_as-kni-paper-service-staging.yml
GITHUB_ACTIONS_MAX_RETRIES=2

# ============================================
# Claude / Anthropic
# ============================================

# Anthropic API key (primary auth method, required for Docker)
ANTHROPIC_API_KEY=sk-ant-your-key

# Alternatively, use your Claude Max subscription (bare-metal only — requires
# interactive `claude login` which does not work inside Docker containers)
# USE_CLAUDE_MAX=true

# ============================================
# Project Configuration
# ============================================
# Absolute path to your local git repo (bare-metal only; in Docker the target
# repo is auto-cloned to /workspace/repo from GITHUB_OWNER/GITHUB_REPO)
# REPO_PATH=/path/to/your/repo

# Your staging URL (used for smoke testing after deploy)
STAGING_URL=https://staging.your-site.com

# ============================================
# Webhook Server
# ============================================
# Port for the Express webhook server
WEBHOOK_PORT=3000

# HMAC-SHA256 secret for verifying Jira webhook signatures
# Leave empty to disable signature verification
WEBHOOK_SECRET=

# ============================================
# Reconciliation & Limits
# ============================================
# Safety-net poll interval in seconds (catches missed webhooks)
RECONCILIATION_INTERVAL=300

# Max Claude turns per phase
CLAUDE_MAX_TURNS_PLAN=30
CLAUDE_MAX_TURNS_IMPLEMENT=200

# Max Claude spend per phase (USD)
CLAUDE_MAX_BUDGET_PLAN=2
CLAUDE_MAX_BUDGET_IMPLEMENT=10

# ============================================
# Docker Settings
# ============================================
# DB_PATH=/data  # Set automatically in docker-compose.yml

# Git commit identity (defaults to GITHUB_OWNER if not set)
# GIT_USER_NAME=my-bot
# GIT_USER_EMAIL=my-bot@users.noreply.github.com

# ============================================
# Legacy Settings (still supported)
# ============================================
# Max time for implementation (in seconds) — used as fallback
CLAUDE_TIMEOUT=600

# Max time for the planning phase (in seconds)
CLAUDE_PLAN_TIMEOUT=120

# Log level: debug, info, warn, error
LOG_LEVEL=info
